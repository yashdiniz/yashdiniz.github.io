---
interface Props {
  text: string;
  width?: string | number;
  height?: string | number;
  animate?: boolean;
}
const { text, width, height, animate }: Props = Astro.props;
const lines = text.split("\n");
const maxlen = Math.max(...lines.map((line) => line.length));
---

<svg
  xmlns="http://www.w3.org/2000/svg"
  version="1.1"
  viewBox={`0 0 ${maxlen * 9} ${lines.length * 17}`}
  width={width}
  height={height}
>
  {
    lines.map((line, index) => (
      <text x="5" y={index * 17}>
        {line}
        {animate && (
          <animate
            attributeName="x"
            values="0;50;0;-50;0"
            dur="180s"
            repeatCount="indefinite"
          />
        )}
      </text>
    ))
  }
  <style>
    text {
      fill: #fff;
      font: 15px monospace;
      white-space: pre;
      dominant-baseline: hanging;
    }
  </style>
</svg>
